# В этой фиче добавлены
Админка - каталог admin_panel, проект на django включая api
ETL - каталог etl, процесс переноса данных из postgres в elasticsearch
Сборка docker compose - каталог infra_theatre. 
- на основе Dockerfile приложений admin_panel, etl собирает контейнеры
- запускает nginx - обратный прокси
- запускает postgres с дампом базы
- запускает redis - хранище состояний etl процесса
- запускает elasticsearch
- запускает swagger с конфигом для endpoint django api

Админка доступна по адресу: http://localhost:8000/admin
Swagger (не проксируется не смотря на конфигурацию nginx) доступен по адресу: http://localhost:8082
Elasticsearch доступен по адресу - http://localhost:9201

Процесс etl ожидает доступности postgres и es и перегоняет данные в es.

# Структура для FastAPI
Предлагю использовать такую строктуру каталогов как в фиче.
Каталог `async_api` для нового модуля/спринта, внутри него создаем структуру для `fastapi` приложения. Из файлов создал только пустой `Dockerfile` в корне. Из дополнительных каталогов сделал `infra_fastapi`, в нем предлагаю описывать `docker-compose`, по аналогии с другими подобными `infra_etl`, `infra_theare`

# Изменения относительно предыдущего коммита
Исправил замечания ревьювера для ETL процесса.
Исправил ошибки в ETL процессе, да они были и ревьювер их не заметил :)
Сделал рефакторинг ETL, как мне кажется он стал более понятным, а `main.py` менее загруженным.
API который был в Django из uri `/api/v1` перенес в `/api/v1/admin`, чтобы не мешал fastapi. Возможно мы его совсем дропнем за ненадоностю. Соответсвующие изменения внес в конфиг `nginx` и `swagger`.


# Как запустить

Переходим в каталог `infra_theatre`, переименовывем файл `.env_example` в `.env` и выполняем
```
docker compose up -d --build
```
Ждем :).
Для доступа к адмике создается пользователь superuser, пароль можно посмотреть в файле `.env_example`.


# Проектная работа 4 спринта

**Важное сообщение для тимлида:** для ускорения проверки проекта укажите ссылку на приватный репозиторий с командной работой в файле readme и отправьте свежее приглашение на аккаунт [BlueDeep](https://github.com/BigDeepBlue).

В папке **tasks** ваша команда найдёт задачи, которые необходимо выполнить в первом спринте второго модуля.  Обратите внимание на задачи **00_create_repo** и **01_create_basis**. Они расцениваются как блокирующие для командной работы, поэтому их необходимо выполнить как можно раньше.

Мы оценили задачи в стори поинтах, значения которых брались из [последовательности Фибоначчи](https://ru.wikipedia.org/wiki/Числа_Фибоначчи) (1,2,3,5,8,…).

Вы можете разбить имеющиеся задачи на более маленькие, например, распределять между участниками команды не большие куски задания, а маленькие подзадачи. В таком случае не забудьте зафиксировать изменения в issues в репозитории.

**От каждого разработчика ожидается выполнение минимум 40% от общего числа стори поинтов в спринте.**

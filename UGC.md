# Требования к сервису пользовательской активности и аналитики

## Функциональные требования

1. Реализовать систему рейтинга фильмов с лайками
2. Добавить функцию пользовательских отзывов к фильмам
3. Создать функцию истории просмотров пользователя
4. Реализовать закладки/избранное для фильмов
5. Обеспечить отслеживание списка "непросмотренных" или "частично просмотренных" фильмов
6. Отслеживать данные о взаимодействии с плеером (например, переключение языков)
7. Предоставить инструменты для аналитики пользовательского поведения
8. Реализовать систему аутентификации пользователей
9. Обеспечить соотнесение каждого запроса с конкретным пользователем

## Нефункциональные требования

1. **Устойчивость к высоким нагрузкам**: Система должна обрабатывать большие объемы одновременных запросов
2. **Производительность**: Должна поддерживать запись большого количества событий, постоянно поступающих от каждого пользователя
3. **Структура данных**: Собранные данные должны быть удобны для команды аналитиков
4. **Безопасность**: Аутентификация требуется для всех запросов
5. **Архитектурные соображения**:
   - Необходимо найти баланс между дублированием кода проверки токена в разных сервисах
   - Учитывать влияние сетевых взаимодействий между AsyncAPI и сервисом BigData на производительность
   - Система должна выдерживать высокую нагрузку как на компоненты BigData, так и на AsyncAPI

## Отсутствующие метрики (требуют определения)

Следующие метрики обычно необходимы для планирования оборудования, но не были указаны в требованиях:

- **RPS (Запросы в секунду)**: Ожидаемая частота пользовательских взаимодействий
- **DAU (Ежедневные активные пользователи)**: Ожидаемое количество уникальных пользователей в день
- **MAU (Ежемесячные активные пользователи)**: Ожидаемое количество уникальных пользователей в месяц
- **Средний размер сообщения**: Размер типичных записываемых данных о событиях
- **Период хранения данных**: Как долго необходимо хранить собранные данные
- **Ожидаемый темп роста**: Прогнозируемое увеличение количества пользователей/данных с течением времени

Эти метрики следует определить для точного расчета потребностей в хранилище на 1-2 года и соответствующей мощности серверов.